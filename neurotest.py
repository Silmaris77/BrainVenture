
questions = [
    {"question": "Czym jest 'bÃ³l spoÅ‚eczny'?", 
     "options": ["BÃ³l fizyczny", "Emocjonalne cierpienie zwiÄ…zane z wykluczeniem", "BÃ³l psychiczny", "BÃ³l zwiÄ…zany z traumÄ…"], 
     "answer": "Emocjonalne cierpienie zwiÄ…zane z wykluczeniem", 
     "explanation": "BÃ³l spoÅ‚eczny odnosi siÄ™ do cierpienia wywoÅ‚anego przez brak akceptacji i wykluczenie z grupy."},

    {"question": "Czym jest 'negatywne nastawienie mÃ³zgu'?", 
     "options": ["Mechanizm obronny mÃ³zgu", "Pozytywna reakcja na stres", "ZdolnoÅ›Ä‡ koncentracji", "Zachowanie zbyt ostroÅ¼ne"], 
     "answer": "Mechanizm obronny mÃ³zgu", 
     "explanation": "Negatywne nastawienie jest mechanizmem obronnym mÃ³zgu, ktÃ³ry zwiÄ™ksza naszÄ… czujnoÅ›Ä‡ wobec zagroÅ¼eÅ„."},

    {"question": "W jakiej sytuacji mÃ³zg uwalnia kortyzol?", 
     "options": ["Przy stresie", "Podczas odpoczynku", "Po jedzeniu", "W czasie medytacji"], 
     "answer": "Przy stresie", 
     "explanation": "Kortyzol jest hormonem uwalnianym w odpowiedzi na stres, przygotowujÄ…c organizm do reakcji na zagroÅ¼enie."},

    {"question": "Dlaczego lider powinien rozwijaÄ‡ swojÄ… inteligencjÄ™ emocjonalnÄ…?", 
     "options": ["Aby lepiej rozumieÄ‡ siebie i innych", "Aby zwiÄ™kszyÄ‡ swojÄ… pewnoÅ›Ä‡ siebie", "Aby wyeliminowaÄ‡ stres", "Aby zdominowaÄ‡ zespÃ³Å‚"], 
     "answer": "Aby lepiej rozumieÄ‡ siebie i innych", 
     "explanation": "Inteligencja emocjonalna pozwala liderowi efektywnie zarzÄ…dzaÄ‡ emocjami, co jest kluczowe w zarzÄ…dzaniu i motywowaniu zespoÅ‚u."},

    {"question": "Co to jest oksytocyna?", 
     "options": ["Hormon stresu", "Hormon miÅ‚oÅ›ci", "NeuroprzekaÅºnik", "Hormon energii"], 
     "answer": "Hormon miÅ‚oÅ›ci", 
     "explanation": "Oksytocyna, znana jako 'hormon miÅ‚oÅ›ci', wspiera wiÄ™zi miÄ™dzyludzkie oraz zaufanie."},

    {"question": "Jakie trzy zasady pracy mÃ³zgu opisujÄ… procesy przetwarzania informacji?", 
     "options": ["UwaÅ¼noÅ›Ä‡, selektywnoÅ›Ä‡, refleksja", "FunkcjonalnoÅ›Ä‡, efektywnoÅ›Ä‡, precyzyjnoÅ›Ä‡", "ZdolnoÅ›Ä‡ do rozwiÄ…zywania problemÃ³w, pamiÄ™Ä‡, emocje", "Percepcja, pamiÄ™Ä‡, rozumowanie"], 
     "answer": "Percepcja, pamiÄ™Ä‡, rozumowanie", 
     "explanation": "MÃ³zg przetwarza informacje poprzez percepcjÄ™, zapamiÄ™tywanie i rozumowanie."},

    {"question": "Co odgrywa gÅ‚Ã³wnÄ… rolÄ™ w procesie podejmowania decyzji?", 
     "options": ["Logika", "Emocje", "Planowanie", "DoÅ›wiadczenie"], 
     "answer": "Emocje", 
     "explanation": "Emocje majÄ… kluczowy wpÅ‚yw na podejmowanie decyzji, poniewaÅ¼ sÄ… zwiÄ…zane z reakcjami mÃ³zgu na moÅ¼liwe korzyÅ›ci lub straty."},

    {"question": "Co to jest model SCARFÂ®?", 
     "options": ["Model zrÃ³wnowaÅ¼onego rozwoju", "Model komunikacji", "Model zarzÄ…dzania ludÅºmi", "Model oceny efektywnoÅ›ci"], 
     "answer": "Model zarzÄ…dzania ludÅºmi", 
     "explanation": "Model SCARFÂ® uwzglÄ™dnia piÄ™Ä‡ podstawowych potrzeb, ktÃ³re wpÅ‚ywajÄ… na reakcje ludzi w Å›rodowisku pracy."},

    {"question": "Czym sÄ… filtry percepcyjne?", 
     "options": ["Mechanizmy obronne", "Przewidywania, ktÃ³re ksztaÅ‚tujÄ… nasze spostrzeÅ¼enia", "Negatywne emocje", "BÅ‚Ä™dy w ocenie sytuacji"], 
     "answer": "Przewidywania, ktÃ³re ksztaÅ‚tujÄ… nasze spostrzeÅ¼enia", 
     "explanation": "Filtry percepcyjne to uprzedzenia, ktÃ³re wpÅ‚ywajÄ… na sposÃ³b, w jaki postrzegamy rzeczywistoÅ›Ä‡."},

    {"question": "Czym jest multitasking?", 
     "options": ["WielozadaniowoÅ›Ä‡", "Kontrola emocji", "Proces koncentracji", "Inteligencja wieloraka"], 
     "answer": "WielozadaniowoÅ›Ä‡", 
     "explanation": "Multitasking to wykonywanie kilku zadaÅ„ jednoczeÅ›nie, chociaÅ¼ nie zawsze jest efektywne."},

    {"question": "Jakie mechanizmy mÃ³zgowe odpowiadajÄ… za generowanie stresu?", 
     "options": ["Pobudzenie ukÅ‚adu limbicznego", "Pobudzenie kory przedczoÅ‚owej", "Pobudzenie ukÅ‚adu nagrody", "Pobudzenie ciaÅ‚a migdaÅ‚owatego"], 
     "answer": "Pobudzenie ukÅ‚adu limbicznego", 
     "explanation": "UkÅ‚ad limbiczny odgrywa kluczowÄ… rolÄ™ w generowaniu reakcji na stres, w tym w procesach emocjonalnych."},

    {"question": "Jakie mechanizmy mÃ³zgowe sÄ… odpowiedzialne za poczucie satysfakcji po osiÄ…gniÄ™ciu celu?", 
     "options": ["Uwalnianie dopaminy", "Uwalnianie serotoniny", "Aktywacja kory przedczoÅ‚owej", "Uwalnianie oksytocyny"], 
     "answer": "Uwalnianie dopaminy", 
     "explanation": "Dopamina jest neuroprzekaÅºnikiem zwiÄ…zanym z uczuciem satysfakcji i nagrody."},

    {"question": "Jakie sÄ… skutki wysokiego poziomu kortyzolu w organizmach liderÃ³w?", 
     "options": ["ZwiÄ™kszenie koncentracji", "ZwiÄ™kszona odpornoÅ›Ä‡ na stres", "Zmniejszenie zdolnoÅ›ci podejmowania decyzji", "ZwiÄ™kszona motywacja"], 
     "answer": "Zmniejszenie zdolnoÅ›ci podejmowania decyzji", 
     "explanation": "Wysoki poziom kortyzolu utrudnia podejmowanie racjonalnych decyzji, obniÅ¼ajÄ…c efektywnoÅ›Ä‡ liderÃ³w."},

    {"question": "W jaki sposÃ³b liderzy mogÄ… wykorzystywaÄ‡ teoriÄ™ SCARFÂ® w codziennej pracy?", 
     "options": ["Aby motywowaÄ‡ pracownikÃ³w", "Aby budowaÄ‡ zaufanie w zespole", "Aby zwiÄ™kszyÄ‡ konkurencjÄ™ w zespole", "Aby kontrolowaÄ‡ emocje w pracy"], 
     "answer": "Aby budowaÄ‡ zaufanie w zespole", 
     "explanation": "Teoria SCARFÂ® pomaga liderom w zarzÄ…dzaniu podstawowymi potrzebami ludzi w organizacji, co zwiÄ™ksza zaufanie i zaangaÅ¼owanie w zespole."},

    {"question": "Jakie neurochemikalia sÄ… zwiÄ…zane z procesem podejmowania decyzji?", 
     "options": ["Dopamina i serotonina", "Dopamina i kortyzol", "Serotonina i oksytocyna", "Adrenalina i dopamina"], 
     "answer": "Dopamina i serotonina", 
     "explanation": "Dopamina i serotonina wpÅ‚ywajÄ… na procesy podejmowania decyzji, motywujÄ…c do dziaÅ‚ania."},

    {"question": "Jakie techniki stosuje siÄ™ w zarzÄ…dzaniu emocjami w pracy?", 
     "options": ["Medytacja, oddech gÅ‚Ä™boki", "DÅ‚ugie przerwy", "Zmiana miejsca pracy", "Unikanie konfrontacji"], 
     "answer": "Medytacja, oddech gÅ‚Ä™boki", 
     "explanation": "Techniki relaksacyjne, takie jak medytacja i oddech gÅ‚Ä™boki, pomagajÄ… zarzÄ…dzaÄ‡ stresem i emocjami w pracy."},

    {"question": "Jakie elementy kultury organizacyjnej wpÅ‚ywajÄ… na rozwÃ³j liderÃ³w?", 
     "options": ["Wsparcie wspÃ³Å‚pracownikÃ³w", "OtwartoÅ›Ä‡ na innowacje", "RÃ³wnowaga miÄ™dzy pracÄ… a Å¼yciem osobistym", "KreatywnoÅ›Ä‡ w zarzÄ…dzaniu"], 
     "answer": "Wsparcie wspÃ³Å‚pracownikÃ³w", 
     "explanation": "Wsparcie ze strony wspÃ³Å‚pracownikÃ³w i przeÅ‚oÅ¼onych ma kluczowe znaczenie w rozwoju liderÃ³w."},

    {"question": "Jakie techniki pomagajÄ… zwiÄ™kszyÄ‡ empatiÄ™ liderÃ³w?", 
     "options": ["Aktywne sÅ‚uchanie", "RozwiÄ…zywanie konfliktÃ³w", "Ustalanie celÃ³w", "Przeprowadzanie spotkaÅ„ zespoÅ‚owych"], 
     "answer": "Aktywne sÅ‚uchanie", 
     "explanation": "Aktywne sÅ‚uchanie to technika, ktÃ³ra pomaga liderowi lepiej rozumieÄ‡ emocje i potrzeby pracownikÃ³w."},

    {"question": "Co jest gÅ‚Ã³wnym celem strategii 'zarzÄ…dzania stresem' w organizacjach?", 
     "options": ["ZwiÄ™kszenie produktywnoÅ›ci", "Zmniejszenie liczby bÅ‚Ä™dÃ³w", "ZwiÄ™kszenie zaangaÅ¼owania pracownikÃ³w", "Zmniejszenie poziomu stresu wÅ›rÃ³d pracownikÃ³w"], 
     "answer": "Zmniejszenie poziomu stresu wÅ›rÃ³d pracownikÃ³w", 
     "explanation": "ZarzÄ…dzanie stresem w organizacjach ma na celu obniÅ¼enie negatywnego wpÅ‚ywu stresu na pracownikÃ³w."},

    {"question": "Jakie techniki mogÄ… pomÃ³c liderowi w radzeniu sobie z wÅ‚asnym stresem?", 
     "options": ["Medytacja", "ZwiÄ™kszenie obciÄ…Å¼enia pracÄ…", "Przeznaczanie wiÄ™cej czasu na spotkania", "Unikanie trudnych rozmÃ³w"], 
     "answer": "Medytacja", 
     "explanation": "Medytacja to skuteczna technika redukcji stresu, pomagajÄ…ca liderowi w zachowaniu rÃ³wnowagi emocjonalnej."},

    {"question": "Jakie techniki zwiÄ™kszajÄ… produktywnoÅ›Ä‡ w stresujÄ…cych sytuacjach?", 
     "options": ["ZarzÄ…dzanie emocjami", "DÅ‚ugie przerwy", "Delegowanie zadaÅ„", "Odpoczynek"], 
     "answer": "Delegowanie zadaÅ„", 
     "explanation": "Delegowanie zadaÅ„ pozwala liderowi skoncentrowaÄ‡ siÄ™ na kluczowych zadaniach i zmniejszyÄ‡ obciÄ…Å¼enie stresem."},

    {"question": "Co wpÅ‚ywa na naszÄ… zdolnoÅ›Ä‡ do skutecznego komunikowania siÄ™ w zespole?", 
     "options": ["Empatia", "PewnoÅ›Ä‡ siebie", "ZdolnoÅ›Ä‡ do sÅ‚uchania", "Wszystkie powyÅ¼sze"], 
     "answer": "Wszystkie powyÅ¼sze", 
     "explanation": "Skuteczne komunikowanie siÄ™ w zespole zaleÅ¼y od empatii, pewnoÅ›ci siebie oraz zdolnoÅ›ci do aktywnego sÅ‚uchania."},

    {"question": "Jakie techniki mogÄ… pomÃ³c w zarzÄ…dzaniu konfliktami w zespole?", 
     "options": ["SÅ‚uchanie wszystkich stron", "Ignorowanie problemu", "WyciÄ…ganie konsekwencji natychmiast", "ZwiÄ™kszenie kontroli"], 
     "answer": "SÅ‚uchanie wszystkich stron", 
     "explanation": "RozwiÄ…zywanie konfliktÃ³w wymaga aktywnego sÅ‚uchania wszystkich stron i szukania kompromisÃ³w."},

    {"question": "Jakie techniki pomagajÄ… w rozwiÄ…zywaniu problemÃ³w w zespole?", 
     "options": ["Burza mÃ³zgÃ³w", "Zlecanie zadaÅ„ na szybko", "Unikanie konfrontacji", "DokÅ‚adne planowanie"], 
     "answer": "Burza mÃ³zgÃ³w", 
     "explanation": "Burza mÃ³zgÃ³w to technika, ktÃ³ra wspiera generowanie nowych pomysÅ‚Ã³w i rozwiÄ…zaÅ„ w grupie."},

    {"question": "Jakie elementy skutecznego przywÃ³dztwa sÄ… kluczowe w motywowaniu zespoÅ‚u?", 
     "options": ["Wizja i inspiracja", "NadzÃ³r i kontrola", "Aktywne sÅ‚uchanie", "Brak ingerencji"], 
     "answer": "Wizja i inspiracja", 
     "explanation": "Skuteczne przywÃ³dztwo opiera siÄ™ na inspirowaniu zespoÅ‚u i wyznaczaniu jasnych celÃ³w."},

    {"question": "Co charakteryzuje skutecznÄ… delegacjÄ™ w pracy lidera?", 
     "options": ["Powierzenie zadaÅ„ z jasno okreÅ›lonymi celami", "Drobiazgowe kontrolowanie postÄ™pÃ³w", "Poddawanie decyzji pod gÅ‚osowanie", "Unikanie rozmÃ³w z pracownikami"], 
     "answer": "Powierzenie zadaÅ„ z jasno okreÅ›lonymi celami", 
     "explanation": "Skuteczna delegacja polega na zaufaniu pracownikom i udzieleniu im jasno okreÅ›lonych zadaÅ„."},

    {"question": "Jakie techniki mogÄ… pomÃ³c liderom w budowaniu zaufania w zespole?", 
     "options": ["PrzejrzystoÅ›Ä‡ w dziaÅ‚aniu", "Okazywanie dominacji", "KrÃ³tkie rozmowy motywacyjne", "WspÃ³lne wyjazdy integracyjne"], 
     "answer": "PrzejrzystoÅ›Ä‡ w dziaÅ‚aniu", 
     "explanation": "Zaufanie w zespole buduje siÄ™ poprzez przejrzystoÅ›Ä‡, otwartoÅ›Ä‡ i uczciwoÅ›Ä‡ w podejmowanych decyzjach."},

    {"question": "Jakie sÄ… korzyÅ›ci wynikajÄ…ce z aktywnego sÅ‚uchania w zespole?", 
     "options": ["ZwiÄ™kszenie zaangaÅ¼owania", "Szybsze rozwiÄ…zywanie konfliktÃ³w", "Lepsza komunikacja", "Wszystkie powyÅ¼sze"], 
     "answer": "Wszystkie powyÅ¼sze", 
     "explanation": "Aktywne sÅ‚uchanie poprawia komunikacjÄ™, zaangaÅ¼owanie oraz umoÅ¼liwia lepsze rozwiÄ…zywanie problemÃ³w w zespole."},

    {"question": "Jakie techniki mogÄ… pomÃ³c w poprawie skutecznoÅ›ci przywÃ³dztwa?", 
     "options": ["Utrzymywanie dystansu", "Inwestowanie w rozwÃ³j osobisty", "Poddawanie decyzji pod publiczne gÅ‚osowanie", "Ograniczanie liczby spotkaÅ„"], 
     "answer": "Inwestowanie w rozwÃ³j osobisty", 
     "explanation": "Skuteczni liderzy inwestujÄ… w rozwÃ³j osobisty, aby lepiej rozumieÄ‡ siebie i innych oraz efektywnie zarzÄ…dzaÄ‡."},

    {"question": "Jakie znaczenie ma Å›wiadomoÅ›Ä‡ emocjonalna liderÃ³w?", 
     "options": ["Wzrost efektywnoÅ›ci pracy", "Poprawa wynikÃ³w finansowych", "Lepsze podejmowanie decyzji", "Zmniejszenie poziomu stresu"], 
     "answer": "Lepsze podejmowanie decyzji", 
     "explanation": "ÅšwiadomoÅ›Ä‡ emocjonalna pozwala liderom podejmowaÄ‡ bardziej racjonalne decyzje, uwzglÄ™dniajÄ…c zarÃ³wno emocje, jak i dane."},

    {"question": "Jakie znaczenie ma zaangaÅ¼owanie liderÃ³w w rozwÃ³j zespoÅ‚Ã³w?", 
     "options": ["ZwiÄ™kszenie produktywnoÅ›ci", "Wzrost zaangaÅ¼owania pracownikÃ³w", "Poprawa atmosfery w pracy", "Wszystkie powyÅ¼sze"], 
     "answer": "Wszystkie powyÅ¼sze", 
     "explanation": "ZaangaÅ¼owanie liderÃ³w w rozwÃ³j zespoÅ‚Ã³w ma kluczowe znaczenie w zwiÄ™kszaniu produktywnoÅ›ci i poprawie atmosfery pracy."},

    {"question": "Jakie techniki pomagajÄ… liderom w zarzÄ…dzaniu wydajnoÅ›ciÄ… zespoÅ‚u?", 
     "options": ["Regularne oceny wynikÃ³w", "Stworzenie planu rozwoju kariery", "Delegowanie zadaÅ„", "Przeprowadzanie rozmÃ³w feedbackowych"], 
     "answer": "Przeprowadzanie rozmÃ³w feedbackowych", 
     "explanation": "Rozmowy feedbackowe sÄ… kluczowe w monitorowaniu wydajnoÅ›ci, poprawie wynikÃ³w oraz budowaniu zaangaÅ¼owania w zespole."},

    {"question": "Jakie mechanizmy mÃ³zgowe sÄ… odpowiedzialne za reagowanie na wyzwania?", 
     "options": ["UkÅ‚ad limbiczny", "UkÅ‚ad nagrody", "CiaÅ‚o migdaÅ‚owate", "Kora przedczoÅ‚owa"], 
     "answer": "UkÅ‚ad limbiczny", 
     "explanation": "UkÅ‚ad limbiczny odpowiada za emocjonalne reakcje na wyzwania, wpÅ‚ywajÄ…c na nasze zachowanie w stresujÄ…cych sytuacjach."},

    {"question": "Jakie techniki pomagajÄ… w rozwoju emocjonalnej stabilnoÅ›ci liderÃ³w?", 
     "options": ["Medytacja, relaksacja", "Aktywne sÅ‚uchanie", "ZwiÄ™kszenie obciÄ…Å¼enia pracÄ…", "Kontrola zewnÄ™trznych bodÅºcÃ³w"], 
     "answer": "Medytacja, relaksacja", 
     "explanation": "Medytacja i relaksacja sÄ… skutecznymi technikami poprawiajÄ…cymi stabilnoÅ›Ä‡ emocjonalnÄ… liderÃ³w w trudnych sytuacjach."},

    {"question": "Jakie techniki moÅ¼na zastosowaÄ‡ w zarzÄ…dzaniu czasem, aby zwiÄ™kszyÄ‡ produktywnoÅ›Ä‡?", 
     "options": ["Priorytetyzacja zadaÅ„", "Eliminowanie spotkaÅ„", "Delegowanie zadaÅ„ na innych", "ZwiÄ™kszenie liczby godzin pracy"], 
     "answer": "Priorytetyzacja zadaÅ„", 
     "explanation": "Priorytetyzacja zadaÅ„ pozwala na skoncentrowanie siÄ™ na najwaÅ¼niejszych zadaniach, co zwiÄ™ksza produktywnoÅ›Ä‡."},
    
    {"question": "Co to jest przywÃ³dztwo transformacyjne?", 
     "options": ["PrzywÃ³dztwo oparte na zaufaniu", "Lider jako osoba zmieniajÄ…ca organizacjÄ™", "Lider jako osoba peÅ‚niÄ…ca rolÄ™ doradcy", "PrzywÃ³dztwo hierarchiczne"], 
     "answer": "Lider jako osoba zmieniajÄ…ca organizacjÄ™", 
     "explanation": "PrzywÃ³dztwo transformacyjne polega na inspirowaniu pracownikÃ³w do zmiany i osiÄ…gania wspÃ³lnych celÃ³w."},]
    
    # Dodaj kolejne pytania...

import streamlit as st
import random
import sqlite3
import hashlib
import pandas as pd

# Kolory i tÅ‚o
background_color = "#ffffff"
highlight_color = "#9b1b30"
text_color = "#000000"
header_color = "#2a2a2a"

# Funkcje do bazy danych
def create_connection():
    conn = sqlite3.connect('test_results.db')
    return conn

def create_user_table():
    conn = create_connection()
    conn.execute('''CREATE TABLE IF NOT EXISTS users
                    (id INTEGER PRIMARY KEY AUTOINCREMENT,
                    first_name TEXT,
                    last_name TEXT,
                    email TEXT UNIQUE,
                    password TEXT)''')
    conn.commit()
    conn.close()

def create_results_table():
    conn = create_connection()
    conn.execute('''CREATE TABLE IF NOT EXISTS results
                    (id INTEGER PRIMARY KEY AUTOINCREMENT,
                    user_id INTEGER,
                    score INTEGER,
                    date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    FOREIGN KEY(user_id) REFERENCES users(id))''')
    conn.commit()
    conn.close()

def register_user(first_name, last_name, email, password):
    conn = create_connection()
    hashed_password = hashlib.sha256(password.encode()).hexdigest()
    conn.execute('''INSERT INTO users (first_name, last_name, email, password)
                    VALUES (?, ?, ?, ?)''', (first_name, last_name, email, hashed_password))
    conn.commit()
    conn.close()

def login_user(email, password):
    conn = create_connection()
    hashed_password = hashlib.sha256(password.encode()).hexdigest()
    cursor = conn.execute('''SELECT id FROM users WHERE email = ? AND password = ?''', (email, hashed_password))
    user = cursor.fetchone()
    conn.close()
    return user

def save_test_result(user_id, score):
    conn = create_connection()
    conn.execute('''INSERT INTO results (user_id, score)
                    VALUES (?, ?)''', (user_id, score))
    conn.commit()
    conn.close()

def get_user_results(user_id):
    conn = create_connection()
    query = '''SELECT r.date, r.score 
               FROM results r
               WHERE r.user_id = ? 
               ORDER BY r.date DESC'''
    results = pd.read_sql(query, conn, params=(user_id,))
    conn.close()
    return results

# Stworzenie tabel, jeÅ›li jeszcze nie istniejÄ…
create_user_table()
create_results_table()

# Lista pytaÅ„ do quizu


# Funkcja do wyÅ›wietlania strony gÅ‚Ã³wnej (rejestracja lub logowanie)
def show_home_page():
    if "user_id" in st.session_state:  # JeÅ›li uÅ¼ytkownik jest zalogowany
        show_dashboard()  # Od razu przechodzimy do panelu uÅ¼ytkownika
    else:
        st.title("ğŸ§  NeuroprzywÃ³dztwo - Test wiedzy")
        st.markdown("## Witaj! Aby rozpoczÄ…Ä‡ test, musisz siÄ™ zalogowaÄ‡ lub zarejestrowaÄ‡.")
        action = st.selectbox("Wybierz akcjÄ™", ["Zaloguj siÄ™", "Zarejestruj siÄ™"], key="home_action_selectbox")  # Unikalny key

        if action == "Zarejestruj siÄ™":
            show_registration_form()
        elif action == "Zaloguj siÄ™":
            show_login_form()

# Funkcja do wyÅ›wietlania formularza rejestracji
def show_registration_form():
    st.header("Zarejestruj siÄ™")
    first_name = st.text_input("ImiÄ™", key="register_first_name")
    last_name = st.text_input("Nazwisko", key="register_last_name")
    email = st.text_input("Email", key="register_email")
    password = st.text_input("HasÅ‚o", type="password", key="register_password")

    if st.button("Zarejestruj siÄ™", key="register_button"):
        if first_name and last_name and email and password:
            register_user(first_name, last_name, email, password)
            st.success("Rejestracja zakoÅ„czona sukcesem! MoÅ¼esz siÄ™ teraz zalogowaÄ‡.")
        else:
            st.error("ProszÄ™ uzupeÅ‚niÄ‡ wszystkie pola.")

# Funkcja do wyÅ›wietlania formularza logowania
def show_login_form():
    st.header("Zaloguj siÄ™")
    email = st.text_input("Email", key="login_email")
    password = st.text_input("HasÅ‚o", type="password", key="login_password")

    if st.button("Zaloguj siÄ™", key="login_button"):
        user = login_user(email, password)
        if user:
            st.session_state.user_id = user[0]  # Zapisujemy user_id do session_state
            st.success(f"Zalogowano pomyÅ›lnie! {email}")
            st.session_state.logged_in = True  # Ustawiamy flagÄ™ logged_in na True
            st.session_state.show_dashboard = True  # Ustawiamy flagÄ™ na true, aby przejÅ›Ä‡ do dashboardu
        else:
            st.error("BÅ‚Ä™dne dane logowania. SprÃ³buj ponownie.")

# Funkcja do wyÅ›wietlania panelu z zakÅ‚adkami
def show_dashboard():
    if "show_dashboard" in st.session_state and st.session_state.show_dashboard:
        st.title("ğŸ§  NeuroprzywÃ³dztwo - Panel UÅ¼ytkownika")
    
        # ZakÅ‚adki
        tabs = st.selectbox("Wybierz sekcjÄ™", ["Strefa Wiedzy", "Test", "Moje PostÄ™py"], key="dashboard_tabs")  # Unikalny key

        if tabs == "Strefa Wiedzy":
            show_strefa_wiedzy()
        elif tabs == "Test":
            show_quiz()
        elif tabs == "Moje PostÄ™py":
            show_results()

# Funkcja do wyÅ›wietlania strefy wiedzy
def show_strefa_wiedzy():
    st.header("Strefa Wiedzy")
    st.write("Tutaj bÄ™dÄ… siÄ™ znajdowaÄ‡ teksty i materiaÅ‚y i wiele innych mateira Å‚ w pomocnicze do nauki neuroprzywÃ³dztwa.")
    # MoÅ¼na dodaÄ‡ wiÄ™cej treÅ›ci edukacyjnych

# Funkcja do wyÅ›wietlania quizu
def show_quiz():
    # Inicjalizacja 'shuffled' w session_state
    if "shuffled" not in st.session_state:
        st.session_state.shuffled = random.sample(questions, 10)  # WybÃ³r 10 losowych pytaÅ„
        st.session_state.score = 0
        st.session_state.current_q = 0
        st.session_state.show_result = False

    q = st.session_state.shuffled[st.session_state.current_q]
    st.subheader(f"Pytanie {st.session_state.current_q + 1} z {len(st.session_state.shuffled)}")
    st.markdown(f"<h3 style='color: {text_color};'>{q['question']}</h3>", unsafe_allow_html=True)

    user_answer = st.radio("", q["options"], key="options", index=0)

    # Sprawdzenie odpowiedzi
    if st.button("SprawdÅº odpowiedÅº", key="check"):
        if user_answer == q["answer"]:
            st.success(f"âœ… Dobrze! Twoja odpowiedÅº: **{user_answer}**")
            st.session_state.score += 1
        else:
            st.error(f"âŒ Å¹le. PrawidÅ‚owa odpowiedÅº: **{q['answer']}**")
        
        st.info(f"â„¹ï¸ {q['explanation']}")
        st.session_state.show_result = True

    # Przycisk "Dalej" do kolejnego pytania
    if st.session_state.show_result:
        if st.session_state.current_q < len(st.session_state.shuffled) - 1:
            if st.button("Dalej", key="next"):
                st.session_state.current_q += 1  # Przechodzimy do kolejnego pytania
                st.session_state.show_result = False  # Resetujemy wynik
        else:
            st.subheader("ğŸ‰ Koniec quizu!")
            st.write(f"TwÃ³j wynik: **{st.session_state.score} / {len(st.session_state.shuffled)}**")
            save_test_result(st.session_state.user_id, st.session_state.score)
            if st.button("Zacznij jeszcze raz", key="restart"):
                st.session_state.score = 0
                st.session_state.current_q = 0
                st.session_state.show_result = False

# Funkcja do wyÅ›wietlania postÄ™pÃ³w uÅ¼ytkownika
def show_results():
    st.header("Moje PostÄ™py")
    results = get_user_results(st.session_state.user_id)
    
    if results.empty:
        st.write("Brak wynikÃ³w testÃ³w.")
    else:
        st.write("Oto Twoje wyniki:")
        st.dataframe(results)  # WyÅ›wietlanie wynikÃ³w w tabeli

# Uruchomienie aplikacji
if __name__ == "__main__":
    show_home_page()  # Strona gÅ‚Ã³wna
