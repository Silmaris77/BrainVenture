
questions = [
    {"question": "Czym jest 'ból społeczny'?", 
     "options": ["Ból fizyczny", "Emocjonalne cierpienie związane z wykluczeniem", "Ból psychiczny", "Ból związany z traumą"], 
     "answer": "Emocjonalne cierpienie związane z wykluczeniem", 
     "explanation": "Ból społeczny odnosi się do cierpienia wywołanego przez brak akceptacji i wykluczenie z grupy."},

    {"question": "Czym jest 'negatywne nastawienie mózgu'?", 
     "options": ["Mechanizm obronny mózgu", "Pozytywna reakcja na stres", "Zdolność koncentracji", "Zachowanie zbyt ostrożne"], 
     "answer": "Mechanizm obronny mózgu", 
     "explanation": "Negatywne nastawienie jest mechanizmem obronnym mózgu, który zwiększa naszą czujność wobec zagrożeń."},

    {"question": "W jakiej sytuacji mózg uwalnia kortyzol?", 
     "options": ["Przy stresie", "Podczas odpoczynku", "Po jedzeniu", "W czasie medytacji"], 
     "answer": "Przy stresie", 
     "explanation": "Kortyzol jest hormonem uwalnianym w odpowiedzi na stres, przygotowując organizm do reakcji na zagrożenie."},

    {"question": "Dlaczego lider powinien rozwijać swoją inteligencję emocjonalną?", 
     "options": ["Aby lepiej rozumieć siebie i innych", "Aby zwiększyć swoją pewność siebie", "Aby wyeliminować stres", "Aby zdominować zespół"], 
     "answer": "Aby lepiej rozumieć siebie i innych", 
     "explanation": "Inteligencja emocjonalna pozwala liderowi efektywnie zarządzać emocjami, co jest kluczowe w zarządzaniu i motywowaniu zespołu."},

    {"question": "Co to jest oksytocyna?", 
     "options": ["Hormon stresu", "Hormon miłości", "Neuroprzekaźnik", "Hormon energii"], 
     "answer": "Hormon miłości", 
     "explanation": "Oksytocyna, znana jako 'hormon miłości', wspiera więzi międzyludzkie oraz zaufanie."},

    {"question": "Jakie trzy zasady pracy mózgu opisują procesy przetwarzania informacji?", 
     "options": ["Uważność, selektywność, refleksja", "Funkcjonalność, efektywność, precyzyjność", "Zdolność do rozwiązywania problemów, pamięć, emocje", "Percepcja, pamięć, rozumowanie"], 
     "answer": "Percepcja, pamięć, rozumowanie", 
     "explanation": "Mózg przetwarza informacje poprzez percepcję, zapamiętywanie i rozumowanie."},

    {"question": "Co odgrywa główną rolę w procesie podejmowania decyzji?", 
     "options": ["Logika", "Emocje", "Planowanie", "Doświadczenie"], 
     "answer": "Emocje", 
     "explanation": "Emocje mają kluczowy wpływ na podejmowanie decyzji, ponieważ są związane z reakcjami mózgu na możliwe korzyści lub straty."},

    {"question": "Co to jest model SCARF®?", 
     "options": ["Model zrównoważonego rozwoju", "Model komunikacji", "Model zarządzania ludźmi", "Model oceny efektywności"], 
     "answer": "Model zarządzania ludźmi", 
     "explanation": "Model SCARF® uwzględnia pięć podstawowych potrzeb, które wpływają na reakcje ludzi w środowisku pracy."},

    {"question": "Czym są filtry percepcyjne?", 
     "options": ["Mechanizmy obronne", "Przewidywania, które kształtują nasze spostrzeżenia", "Negatywne emocje", "Błędy w ocenie sytuacji"], 
     "answer": "Przewidywania, które kształtują nasze spostrzeżenia", 
     "explanation": "Filtry percepcyjne to uprzedzenia, które wpływają na sposób, w jaki postrzegamy rzeczywistość."},

    {"question": "Czym jest multitasking?", 
     "options": ["Wielozadaniowość", "Kontrola emocji", "Proces koncentracji", "Inteligencja wieloraka"], 
     "answer": "Wielozadaniowość", 
     "explanation": "Multitasking to wykonywanie kilku zadań jednocześnie, chociaż nie zawsze jest efektywne."},

    {"question": "Jakie mechanizmy mózgowe odpowiadają za generowanie stresu?", 
     "options": ["Pobudzenie układu limbicznego", "Pobudzenie kory przedczołowej", "Pobudzenie układu nagrody", "Pobudzenie ciała migdałowatego"], 
     "answer": "Pobudzenie układu limbicznego", 
     "explanation": "Układ limbiczny odgrywa kluczową rolę w generowaniu reakcji na stres, w tym w procesach emocjonalnych."},

    {"question": "Jakie mechanizmy mózgowe są odpowiedzialne za poczucie satysfakcji po osiągnięciu celu?", 
     "options": ["Uwalnianie dopaminy", "Uwalnianie serotoniny", "Aktywacja kory przedczołowej", "Uwalnianie oksytocyny"], 
     "answer": "Uwalnianie dopaminy", 
     "explanation": "Dopamina jest neuroprzekaźnikiem związanym z uczuciem satysfakcji i nagrody."},

    {"question": "Jakie są skutki wysokiego poziomu kortyzolu w organizmach liderów?", 
     "options": ["Zwiększenie koncentracji", "Zwiększona odporność na stres", "Zmniejszenie zdolności podejmowania decyzji", "Zwiększona motywacja"], 
     "answer": "Zmniejszenie zdolności podejmowania decyzji", 
     "explanation": "Wysoki poziom kortyzolu utrudnia podejmowanie racjonalnych decyzji, obniżając efektywność liderów."},

    {"question": "W jaki sposób liderzy mogą wykorzystywać teorię SCARF® w codziennej pracy?", 
     "options": ["Aby motywować pracowników", "Aby budować zaufanie w zespole", "Aby zwiększyć konkurencję w zespole", "Aby kontrolować emocje w pracy"], 
     "answer": "Aby budować zaufanie w zespole", 
     "explanation": "Teoria SCARF® pomaga liderom w zarządzaniu podstawowymi potrzebami ludzi w organizacji, co zwiększa zaufanie i zaangażowanie w zespole."},

    {"question": "Jakie neurochemikalia są związane z procesem podejmowania decyzji?", 
     "options": ["Dopamina i serotonina", "Dopamina i kortyzol", "Serotonina i oksytocyna", "Adrenalina i dopamina"], 
     "answer": "Dopamina i serotonina", 
     "explanation": "Dopamina i serotonina wpływają na procesy podejmowania decyzji, motywując do działania."},

    {"question": "Jakie techniki stosuje się w zarządzaniu emocjami w pracy?", 
     "options": ["Medytacja, oddech głęboki", "Długie przerwy", "Zmiana miejsca pracy", "Unikanie konfrontacji"], 
     "answer": "Medytacja, oddech głęboki", 
     "explanation": "Techniki relaksacyjne, takie jak medytacja i oddech głęboki, pomagają zarządzać stresem i emocjami w pracy."},

    {"question": "Jakie elementy kultury organizacyjnej wpływają na rozwój liderów?", 
     "options": ["Wsparcie współpracowników", "Otwartość na innowacje", "Równowaga między pracą a życiem osobistym", "Kreatywność w zarządzaniu"], 
     "answer": "Wsparcie współpracowników", 
     "explanation": "Wsparcie ze strony współpracowników i przełożonych ma kluczowe znaczenie w rozwoju liderów."},

    {"question": "Jakie techniki pomagają zwiększyć empatię liderów?", 
     "options": ["Aktywne słuchanie", "Rozwiązywanie konfliktów", "Ustalanie celów", "Przeprowadzanie spotkań zespołowych"], 
     "answer": "Aktywne słuchanie", 
     "explanation": "Aktywne słuchanie to technika, która pomaga liderowi lepiej rozumieć emocje i potrzeby pracowników."},

    {"question": "Co jest głównym celem strategii 'zarządzania stresem' w organizacjach?", 
     "options": ["Zwiększenie produktywności", "Zmniejszenie liczby błędów", "Zwiększenie zaangażowania pracowników", "Zmniejszenie poziomu stresu wśród pracowników"], 
     "answer": "Zmniejszenie poziomu stresu wśród pracowników", 
     "explanation": "Zarządzanie stresem w organizacjach ma na celu obniżenie negatywnego wpływu stresu na pracowników."},

    {"question": "Jakie techniki mogą pomóc liderowi w radzeniu sobie z własnym stresem?", 
     "options": ["Medytacja", "Zwiększenie obciążenia pracą", "Przeznaczanie więcej czasu na spotkania", "Unikanie trudnych rozmów"], 
     "answer": "Medytacja", 
     "explanation": "Medytacja to skuteczna technika redukcji stresu, pomagająca liderowi w zachowaniu równowagi emocjonalnej."},

    {"question": "Jakie techniki zwiększają produktywność w stresujących sytuacjach?", 
     "options": ["Zarządzanie emocjami", "Długie przerwy", "Delegowanie zadań", "Odpoczynek"], 
     "answer": "Delegowanie zadań", 
     "explanation": "Delegowanie zadań pozwala liderowi skoncentrować się na kluczowych zadaniach i zmniejszyć obciążenie stresem."},

    {"question": "Co wpływa na naszą zdolność do skutecznego komunikowania się w zespole?", 
     "options": ["Empatia", "Pewność siebie", "Zdolność do słuchania", "Wszystkie powyższe"], 
     "answer": "Wszystkie powyższe", 
     "explanation": "Skuteczne komunikowanie się w zespole zależy od empatii, pewności siebie oraz zdolności do aktywnego słuchania."},

    {"question": "Jakie techniki mogą pomóc w zarządzaniu konfliktami w zespole?", 
     "options": ["Słuchanie wszystkich stron", "Ignorowanie problemu", "Wyciąganie konsekwencji natychmiast", "Zwiększenie kontroli"], 
     "answer": "Słuchanie wszystkich stron", 
     "explanation": "Rozwiązywanie konfliktów wymaga aktywnego słuchania wszystkich stron i szukania kompromisów."},

    {"question": "Jakie techniki pomagają w rozwiązywaniu problemów w zespole?", 
     "options": ["Burza mózgów", "Zlecanie zadań na szybko", "Unikanie konfrontacji", "Dokładne planowanie"], 
     "answer": "Burza mózgów", 
     "explanation": "Burza mózgów to technika, która wspiera generowanie nowych pomysłów i rozwiązań w grupie."},

    {"question": "Jakie elementy skutecznego przywództwa są kluczowe w motywowaniu zespołu?", 
     "options": ["Wizja i inspiracja", "Nadzór i kontrola", "Aktywne słuchanie", "Brak ingerencji"], 
     "answer": "Wizja i inspiracja", 
     "explanation": "Skuteczne przywództwo opiera się na inspirowaniu zespołu i wyznaczaniu jasnych celów."},

    {"question": "Co charakteryzuje skuteczną delegację w pracy lidera?", 
     "options": ["Powierzenie zadań z jasno określonymi celami", "Drobiazgowe kontrolowanie postępów", "Poddawanie decyzji pod głosowanie", "Unikanie rozmów z pracownikami"], 
     "answer": "Powierzenie zadań z jasno określonymi celami", 
     "explanation": "Skuteczna delegacja polega na zaufaniu pracownikom i udzieleniu im jasno określonych zadań."},

    {"question": "Jakie techniki mogą pomóc liderom w budowaniu zaufania w zespole?", 
     "options": ["Przejrzystość w działaniu", "Okazywanie dominacji", "Krótkie rozmowy motywacyjne", "Wspólne wyjazdy integracyjne"], 
     "answer": "Przejrzystość w działaniu", 
     "explanation": "Zaufanie w zespole buduje się poprzez przejrzystość, otwartość i uczciwość w podejmowanych decyzjach."},

    {"question": "Jakie są korzyści wynikające z aktywnego słuchania w zespole?", 
     "options": ["Zwiększenie zaangażowania", "Szybsze rozwiązywanie konfliktów", "Lepsza komunikacja", "Wszystkie powyższe"], 
     "answer": "Wszystkie powyższe", 
     "explanation": "Aktywne słuchanie poprawia komunikację, zaangażowanie oraz umożliwia lepsze rozwiązywanie problemów w zespole."},

    {"question": "Jakie techniki mogą pomóc w poprawie skuteczności przywództwa?", 
     "options": ["Utrzymywanie dystansu", "Inwestowanie w rozwój osobisty", "Poddawanie decyzji pod publiczne głosowanie", "Ograniczanie liczby spotkań"], 
     "answer": "Inwestowanie w rozwój osobisty", 
     "explanation": "Skuteczni liderzy inwestują w rozwój osobisty, aby lepiej rozumieć siebie i innych oraz efektywnie zarządzać."},

    {"question": "Jakie znaczenie ma świadomość emocjonalna liderów?", 
     "options": ["Wzrost efektywności pracy", "Poprawa wyników finansowych", "Lepsze podejmowanie decyzji", "Zmniejszenie poziomu stresu"], 
     "answer": "Lepsze podejmowanie decyzji", 
     "explanation": "Świadomość emocjonalna pozwala liderom podejmować bardziej racjonalne decyzje, uwzględniając zarówno emocje, jak i dane."},

    {"question": "Jakie znaczenie ma zaangażowanie liderów w rozwój zespołów?", 
     "options": ["Zwiększenie produktywności", "Wzrost zaangażowania pracowników", "Poprawa atmosfery w pracy", "Wszystkie powyższe"], 
     "answer": "Wszystkie powyższe", 
     "explanation": "Zaangażowanie liderów w rozwój zespołów ma kluczowe znaczenie w zwiększaniu produktywności i poprawie atmosfery pracy."},

    {"question": "Jakie techniki pomagają liderom w zarządzaniu wydajnością zespołu?", 
     "options": ["Regularne oceny wyników", "Stworzenie planu rozwoju kariery", "Delegowanie zadań", "Przeprowadzanie rozmów feedbackowych"], 
     "answer": "Przeprowadzanie rozmów feedbackowych", 
     "explanation": "Rozmowy feedbackowe są kluczowe w monitorowaniu wydajności, poprawie wyników oraz budowaniu zaangażowania w zespole."},

    {"question": "Jakie mechanizmy mózgowe są odpowiedzialne za reagowanie na wyzwania?", 
     "options": ["Układ limbiczny", "Układ nagrody", "Ciało migdałowate", "Kora przedczołowa"], 
     "answer": "Układ limbiczny", 
     "explanation": "Układ limbiczny odpowiada za emocjonalne reakcje na wyzwania, wpływając na nasze zachowanie w stresujących sytuacjach."},

    {"question": "Jakie techniki pomagają w rozwoju emocjonalnej stabilności liderów?", 
     "options": ["Medytacja, relaksacja", "Aktywne słuchanie", "Zwiększenie obciążenia pracą", "Kontrola zewnętrznych bodźców"], 
     "answer": "Medytacja, relaksacja", 
     "explanation": "Medytacja i relaksacja są skutecznymi technikami poprawiającymi stabilność emocjonalną liderów w trudnych sytuacjach."},

    {"question": "Jakie techniki można zastosować w zarządzaniu czasem, aby zwiększyć produktywność?", 
     "options": ["Priorytetyzacja zadań", "Eliminowanie spotkań", "Delegowanie zadań na innych", "Zwiększenie liczby godzin pracy"], 
     "answer": "Priorytetyzacja zadań", 
     "explanation": "Priorytetyzacja zadań pozwala na skoncentrowanie się na najważniejszych zadaniach, co zwiększa produktywność."},
    
    {"question": "Co to jest przywództwo transformacyjne?", 
     "options": ["Przywództwo oparte na zaufaniu", "Lider jako osoba zmieniająca organizację", "Lider jako osoba pełniąca rolę doradcy", "Przywództwo hierarchiczne"], 
     "answer": "Lider jako osoba zmieniająca organizację", 
     "explanation": "Przywództwo transformacyjne polega na inspirowaniu pracowników do zmiany i osiągania wspólnych celów."},]
    
    # Dodaj kolejne pytania...

import streamlit as st
import random
import sqlite3
import hashlib
import pandas as pd

# Kolory i tło
background_color = "#ffffff"
highlight_color = "#9b1b30"
text_color = "#000000"
header_color = "#2a2a2a"

# Funkcje do bazy danych
def create_connection():
    conn = sqlite3.connect('test_results.db')
    return conn

def create_user_table():
    conn = create_connection()
    conn.execute('''CREATE TABLE IF NOT EXISTS users
                    (id INTEGER PRIMARY KEY AUTOINCREMENT,
                    first_name TEXT,
                    last_name TEXT,
                    email TEXT UNIQUE,
                    password TEXT)''')
    conn.commit()
    conn.close()

def create_results_table():
    conn = create_connection()
    conn.execute('''CREATE TABLE IF NOT EXISTS results
                    (id INTEGER PRIMARY KEY AUTOINCREMENT,
                    user_id INTEGER,
                    score INTEGER,
                    date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    FOREIGN KEY(user_id) REFERENCES users(id))''')
    conn.commit()
    conn.close()

def register_user(first_name, last_name, email, password):
    conn = create_connection()
    hashed_password = hashlib.sha256(password.encode()).hexdigest()
    conn.execute('''INSERT INTO users (first_name, last_name, email, password)
                    VALUES (?, ?, ?, ?)''', (first_name, last_name, email, hashed_password))
    conn.commit()
    conn.close()

def login_user(email, password):
    conn = create_connection()
    hashed_password = hashlib.sha256(password.encode()).hexdigest()
    cursor = conn.execute('''SELECT id FROM users WHERE email = ? AND password = ?''', (email, hashed_password))
    user = cursor.fetchone()
    conn.close()
    return user

def save_test_result(user_id, score):
    conn = create_connection()
    conn.execute('''INSERT INTO results (user_id, score)
                    VALUES (?, ?)''', (user_id, score))
    conn.commit()
    conn.close()

def get_user_results(user_id):
    conn = create_connection()
    query = '''SELECT r.date, r.score 
               FROM results r
               WHERE r.user_id = ? 
               ORDER BY r.date DESC'''
    results = pd.read_sql(query, conn, params=(user_id,))
    conn.close()
    return results

# Stworzenie tabel, jeśli jeszcze nie istnieją
create_user_table()
create_results_table()

# Lista pytań do quizu


# Funkcja do wyświetlania strony głównej (rejestracja lub logowanie)
def show_home_page():
    if "user_id" in st.session_state:  # Jeśli użytkownik jest zalogowany
        show_dashboard()  # Od razu przechodzimy do panelu użytkownika
    else:
        st.title("🧠 Neuroprzywództwo - Test wiedzy")
        st.markdown("## Witaj! Aby rozpocząć test, musisz się zalogować lub zarejestrować.")
        action = st.selectbox("Wybierz akcję", ["Zaloguj się", "Zarejestruj się"], key="home_action_selectbox")  # Unikalny key

        if action == "Zarejestruj się":
            show_registration_form()
        elif action == "Zaloguj się":
            show_login_form()

# Funkcja do wyświetlania formularza rejestracji
def show_registration_form():
    st.header("Zarejestruj się")
    first_name = st.text_input("Imię", key="register_first_name")
    last_name = st.text_input("Nazwisko", key="register_last_name")
    email = st.text_input("Email", key="register_email")
    password = st.text_input("Hasło", type="password", key="register_password")

    if st.button("Zarejestruj się", key="register_button"):
        if first_name and last_name and email and password:
            register_user(first_name, last_name, email, password)
            st.success("Rejestracja zakończona sukcesem! Możesz się teraz zalogować.")
        else:
            st.error("Proszę uzupełnić wszystkie pola.")

# Funkcja do wyświetlania formularza logowania
def show_login_form():
    st.header("Zaloguj się")
    email = st.text_input("Email", key="login_email")
    password = st.text_input("Hasło", type="password", key="login_password")

    if st.button("Zaloguj się", key="login_button"):
        user = login_user(email, password)
        if user:
            st.session_state.user_id = user[0]  # Zapisujemy user_id do session_state
            st.success(f"Zalogowano pomyślnie! {email}")
            st.session_state.logged_in = True  # Ustawiamy flagę logged_in na True
            st.session_state.show_dashboard = True  # Ustawiamy flagę na true, aby przejść do dashboardu
        else:
            st.error("Błędne dane logowania. Spróbuj ponownie.")

# Funkcja do wyświetlania panelu z zakładkami
def show_dashboard():
    if "show_dashboard" in st.session_state and st.session_state.show_dashboard:
        st.title("🧠 Neuroprzywództwo - Panel Użytkownika")
    
        # Zakładki
        tabs = st.selectbox("Wybierz sekcję", ["Strefa Wiedzy", "Test", "Moje Postępy"], key="dashboard_tabs")  # Unikalny key

        if tabs == "Strefa Wiedzy":
            show_strefa_wiedzy()
        elif tabs == "Test":
            show_quiz()
        elif tabs == "Moje Postępy":
            show_results()

# Funkcja do wyświetlania strefy wiedzy
def show_strefa_wiedzy():
    st.header("Strefa Wiedzy")
    st.write("Tutaj będą się znajdować teksty i materiały i wiele innych mateira ł w pomocnicze do nauki neuroprzywództwa.")
    # Można dodać więcej treści edukacyjnych

# Funkcja do wyświetlania quizu
def show_quiz():
    # Inicjalizacja 'shuffled' w session_state
    if "shuffled" not in st.session_state:
        st.session_state.shuffled = random.sample(questions, 10)  # Wybór 10 losowych pytań
        st.session_state.score = 0
        st.session_state.current_q = 0
        st.session_state.show_result = False

    q = st.session_state.shuffled[st.session_state.current_q]
    st.subheader(f"Pytanie {st.session_state.current_q + 1} z {len(st.session_state.shuffled)}")
    st.markdown(f"<h3 style='color: {text_color};'>{q['question']}</h3>", unsafe_allow_html=True)

    user_answer = st.radio("", q["options"], key="options", index=0)

    # Sprawdzenie odpowiedzi
    if st.button("Sprawdź odpowiedź", key="check"):
        if user_answer == q["answer"]:
            st.success(f"✅ Dobrze! Twoja odpowiedź: **{user_answer}**")
            st.session_state.score += 1
        else:
            st.error(f"❌ Źle. Prawidłowa odpowiedź: **{q['answer']}**")
        
        st.info(f"ℹ️ {q['explanation']}")
        st.session_state.show_result = True

    # Przycisk "Dalej" do kolejnego pytania
    if st.session_state.show_result:
        if st.session_state.current_q < len(st.session_state.shuffled) - 1:
            if st.button("Dalej", key="next"):
                st.session_state.current_q += 1  # Przechodzimy do kolejnego pytania
                st.session_state.show_result = False  # Resetujemy wynik
        else:
            st.subheader("🎉 Koniec quizu!")
            st.write(f"Twój wynik: **{st.session_state.score} / {len(st.session_state.shuffled)}**")
            save_test_result(st.session_state.user_id, st.session_state.score)
            if st.button("Zacznij jeszcze raz", key="restart"):
                st.session_state.score = 0
                st.session_state.current_q = 0
                st.session_state.show_result = False

# Funkcja do wyświetlania postępów użytkownika
def show_results():
    st.header("Moje Postępy")
    results = get_user_results(st.session_state.user_id)
    
    if results.empty:
        st.write("Brak wyników testów.")
    else:
        st.write("Oto Twoje wyniki:")
        st.dataframe(results)  # Wyświetlanie wyników w tabeli

# Uruchomienie aplikacji
if __name__ == "__main__":
    show_home_page()  # Strona główna
